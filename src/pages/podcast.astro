---
import Base from '../layouts/Base.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.jsx';
import siteConfig from '../site.config.js';

// SEO meta data
const seoData = {
  title: "Podcast - Morning Metrics",
  description: "Listen to Morning Metrics: in-depth conversations with data leaders, analytics experts, and AI innovators. Get practical insights on building data-driven organizations.",
  image: "/og-image-podcast.png"
};

// Fetch podcast episodes from Spotify or use fallback
async function fetchPodcastEpisodes() {
  try {
    // For now, we'll use manual episodes since Spotify RSS requires special handling
    // You can integrate the spotify-integration.js script when ready
    
    return [
      {
        id: 1,
        title: "Morning Metrics: The Future of Business Intelligence",
        description: "Exploring how AI and automation are transforming traditional BI workflows, and what data professionals need to know for 2025 and beyond.",
        date: "2024-12-15T08:00:00Z",
        duration: "42:30",
        spotifyUrl: `https://open.spotify.com/show/${siteConfig.spotifyShowId}`,
        guest: "Alexander Nykolaiszyn",
        topics: ["AI", "Business Intelligence", "Future Trends", "Automation"]
      },
      {
        id: 2,
        title: "Building Data-Driven Culture in Modern Organizations",
        description: "A deep dive into how organizations successfully implement data-driven decision making across all business units, featuring real-world case studies.",
        date: "2024-12-01T08:00:00Z",
        duration: "38:45",
        spotifyUrl: `https://open.spotify.com/show/${siteConfig.spotifyShowId}`,
        guest: "Industry Expert",
        topics: ["Culture Change", "Data Strategy", "Leadership", "Enterprise"]
      },
      {
        id: 3,
        title: "Modern Data Stack: Tools and Technologies for 2025",
        description: "Comparing the latest data engineering tools, cloud platforms, and analytics technologies that are shaping the modern data landscape.",
        date: "2024-11-15T08:00:00Z",
        duration: "35:12",
        spotifyUrl: `https://open.spotify.com/show/${siteConfig.spotifyShowId}`,
        guest: "Tech Leader",
        topics: ["Data Engineering", "Cloud Platforms", "Technology", "Tools"]
      }
    ];
  } catch (error) {
    console.error('Error fetching podcast episodes:', error);
    return [];
  }
}

// Fetch episodes at build time
const podcastEpisodes = await fetchPodcastEpisodes();

// Format date
function formatDate(dateString) {
  return new Date(dateString).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}
---

<Base {...seoData}>
  <Navbar />
  
  <!-- Header Section -->
  <section class="bg-gradient-to-br from-gray-900 to-gray-800 text-white py-20">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto text-center">        <h1 class="text-5xl md:text-6xl font-bold mb-6">
          <span class="text-brandGold">Morning Metrics</span>
        </h1>
        <p class="text-xl md:text-2xl text-gray-300 mb-8">
          Your daily dose of data strategy insights. Conversations with analytics leaders, BI experts, and innovators shaping the future of business intelligence.
        </p><div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href={`https://open.spotify.com/show/${siteConfig.spotifyShowId}`}
            target="_blank" 
            rel="noopener noreferrer"
            class="bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-8 rounded-lg transition-colors flex items-center justify-center gap-2"
          >
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"/>
            </svg>
            Listen on Spotify
          </a>
          <a 
            href="https://podcasts.apple.com/podcast/YOUR_PODCAST_ID" 
            target="_blank" 
            rel="noopener noreferrer"
            class="border-2 border-brandGold text-brandGold hover:bg-brandGold hover:text-black font-semibold py-4 px-8 rounded-lg transition-colors"
          >
            Apple Podcasts
          </a>
        </div>
      </div>
    </div>
  </section>
  <!-- Featured Podcast Player -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-8">          <h2 class="text-3xl font-bold text-gray-900 mb-4">Listen to Morning Metrics</h2>
          <p class="text-lg text-gray-600">
            Start your day with data strategy insights. Episodes feature practical advice, industry trends, and conversations with BI leaders.
          </p>
        </div>
        
        <!-- Spotify Embed -->
        <div class="rounded-xl overflow-hidden shadow-lg">
          <iframe 
            src={`https://open.spotify.com/embed/show/${siteConfig.spotifyShowId}?utm_source=generator&theme=0`}
            width="100%" 
            height="352" 
            frameborder="0" 
            allowfullscreen="" 
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
            loading="lazy">
          </iframe>
        </div>
      </div>
    </div>
  </section>
  <!-- Episodes List -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-6">
      <div class="max-w-6xl mx-auto">
        <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Episodes</h2>
        
        <!-- RSS Integration Note -->
        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-8 max-w-4xl mx-auto">
          <p class="text-green-800 text-sm text-center">
            <strong>✅ Spotify Integration Ready:</strong> Episode data is managed via the Spotify show 
            <a href={`https://open.spotify.com/show/${siteConfig.spotifyShowId}`} class="underline" target="_blank">
              Morning Metrics
            </a>. 
            RSS integration script available in <code>scripts/spotify-integration.js</code> for automatic episode fetching.
          </p>
        </div>
        
        {podcastEpisodes.length > 0 ? (
          <div class="space-y-8">
            {podcastEpisodes.map((episode) => (
              <div class="bg-white rounded-xl shadow-lg p-8 hover:shadow-xl transition-shadow duration-300">
                <div class="flex flex-col lg:flex-row gap-6">
                  <div class="lg:w-16 lg:h-16 w-12 h-12 bg-brandGreen rounded-full flex items-center justify-center flex-shrink-0">
                    <span class="text-white font-bold text-lg">#{episode.id}</span>
                  </div>
                  
                  <div class="flex-1">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">{episode.title}</h3>
                    <p class="text-lg text-brandGreen mb-3">with {episode.guest}</p>
                    <p class="text-gray-600 mb-4">{episode.description}</p>
                    
                    <div class="flex flex-wrap gap-2 mb-4">
                      {episode.topics.map(topic => (
                        <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm">{topic}</span>
                      ))}
                    </div>
                    
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-4 text-sm text-gray-500">
                        <span>{formatDate(episode.date)}</span>
                        <span>•</span>
                        <span>{episode.duration}</span>
                      </div>
                      <a 
                        href={episode.spotifyUrl} 
                        target="_blank" 
                        rel="noopener noreferrer"
                        class="bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors"
                      >
                        Listen
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        ) : (
          <div class="bg-white rounded-xl shadow-lg p-12 text-center">
            <div class="w-20 h-20 bg-brandGreen rounded-full flex items-center justify-center mx-auto mb-6">
              <svg class="w-10 h-10 text-white" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>
              </svg>
            </div>            <h3 class="text-2xl font-bold text-gray-900 mb-4">Morning Metrics Episodes</h3>
            <p class="text-lg text-gray-600 mb-6">
              Check out the latest episodes on Spotify! New episodes are released regularly with insights from data leaders and BI experts.
            </p>
            <a 
              href={`https://open.spotify.com/show/${siteConfig.spotifyShowId}`}
              target="_blank" 
              rel="noopener noreferrer"
              class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors inline-flex items-center gap-2"
            >
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"/>
              </svg>
              Listen on Spotify
            </a>
          </div>
        )}
      </div>
    </div>
  </section>

  <!-- About the Host -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl font-bold text-gray-900 mb-8">About the Host</h2>        <div class="bg-gray-50 rounded-2xl p-8">
          <div class="w-24 h-24 bg-brandGreen rounded-full flex items-center justify-center mx-auto mb-6">
            <span class="text-white font-bold text-2xl">AN</span>
          </div>
          <h3 class="text-2xl font-bold text-gray-900 mb-4">{siteConfig.author}</h3>
          <p class="text-lg text-gray-600 mb-6">
            Manager Business Insights at Lennar and host of the Trailblazer Analytics Podcast. With 15+ years of experience transforming organizations through data-driven insights, Alexander brings practical wisdom and industry expertise to every conversation.
          </p>
          <a href="/about" class="text-brandGreen hover:text-green-700 font-semibold">
            Learn More About Alexander →
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Subscribe Section -->
  <section class="py-16 bg-brandGreen text-white">
    <div class="container mx-auto px-6">
      <div class="max-w-2xl mx-auto text-center">
        <h2 class="text-3xl font-bold mb-4">Never Miss an Episode</h2>
        <p class="text-xl mb-8 opacity-90">
          Subscribe to get notified when new episodes are released.
        </p>        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href={`https://open.spotify.com/show/${siteConfig.spotifyShowId}`}
            target="_blank" 
            rel="noopener noreferrer"
            class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
          >
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"/>
            </svg>
            Spotify
          </a>
          <a 
            href="https://podcasts.apple.com/podcast/YOUR_PODCAST_ID" 
            target="_blank" 
            rel="noopener noreferrer"
            class="bg-black hover:bg-gray-800 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
          >
            Apple Podcasts
          </a>
          <a 
            href="https://podcasts.google.com/feed/YOUR_RSS_FEED" 
            target="_blank" 
            rel="noopener noreferrer"
            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
          >
            Google Podcasts
          </a>
        </div>
      </div>
    </div>
  </section>

  <Footer />
</Base>
